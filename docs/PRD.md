# 📋 Product Requirements Document (PRD)

## 📖 프로젝트 개요

### 🎯 프로젝트 명
**Flutter Admin Web for Medical Tourism Management**

### 📝 프로젝트 설명
의료관광 가이드 서비스를 제공하는 회사의 종합 관리 시스템으로, 고객 예약부터 정산까지의 전체 비즈니스 프로세스를 관리하는 웹 기반 관리자 도구

### 🏗️ 기술 스택
- **Frontend**: Flutter Web (Dart)
- **State Management**: Riverpod + Freezed + Flutter Hooks
- **Backend**: Supabase (PostgreSQL 17.4.1)
- **UI Framework**: Custom Admin Dashboard

### 👥 사용자
- **주 사용자**: 회사 관리자 (PC 환경)
- **부 사용자**: 가이드 (모바일 앱, 향후 개발)
- **고객**: 리뷰 작성 (웹 폼, 단순)

---

## 🎨 UI/UX 구조

### 📱 전체 레이아웃
```
┌─────────────────────────────────────────┐
│ 상단: 로고, 사용자 정보, 로그아웃        │
├─────────────────────────────────────────┤
│ 좌측 사이드바: 9개 탭 네비게이션         │
│ ├─ 1. 🏠 대시보드                       │
│ ├─ 2. 👥 고객 관리                      │
│ ├─ 3. 📅 예약 관리                      │
│ ├─ 4. 💰 정산 관리                      │
│ ├─ 5. 💉 시술 관리                      │
│ ├─ 6. 📊 재무 관리                      │
│ ├─ 7. 🎯 가이드 관리                    │
│ ├─ 8. ⭐ 리뷰 관리                      │
│ └─ 9. 🏥 병원 관리                      │
│                                         │
│ 메인 콘텐츠 영역                        │
│ ┌─────────────────────────────────────┐ │
│ │ 각 탭별 전용 인터페이스             │ │
│ │                                     │ │
│ └─────────────────────────────────────┘ │
└─────────────────────────────────────────┘
```

---

## 📋 탭별 상세 요구사항

## 1️⃣ 🏠 대시보드 탭

### 🎯 주요 목적
전체 비즈니스 현황을 한눈에 파악하고 긴급한 작업들을 관리

### 📊 표시 지표 (카드 형태)
#### **매출 지표**
- **고객 예약 수**: Daily / Weekly / Monthly / Total
- **고객 결제액**: 총 거래액 (부가세 포함)
- **회사 매출액**: 병원 수수료 기준 계산된 회사 수익
- **가이드 정산액**: 회사 지출액 (가이드에게 지급할 금액)
- **회사 매출총이익**: 회사 매출 - 가이드 정산액

#### **운영 지표**
- **신규 고객 비율**: 신규 vs 재구매 고객 비율
- **패키지 vs 단일 시술**: 패키지 선호도 분석
- **병원별 매출 현황**: 주요 파트너 병원 성과
- **가이드별 성과**: 등급별 가이드 현황

### 📈 시각화 요소
- **라인 그래프**: 시간별 매출 트렌드
- **파이 차트**: 시술 카테고리별 비율
- **바 차트**: 병원별/가이드별 성과 비교

### ⚡ TODO 리스트 영역
```
우선순위별 관리자 할 일:
1. 🚨 배정 대기 중인 예약 (N건)
2. 📝 가이드 제출 정산 자료 처리 (N건)
3. 💰 월초 정산 처리 대기 (N명)
4. 📞 고객 문의 대응 필요 (N건)
5. 🔍 리뷰 관리 필요 (N건)
```

### 🔄 실시간 업데이트
- 새 예약 생성 시 즉시 반영
- 정산 처리 시 지표 업데이트
- 가이드 등급 변동 시 알림

---

## 2️⃣ 👥 고객 관리 탭

### 🎯 주요 목적
고객 정보의 중앙 집중 관리 및 이력 추적

### 🆔 고객 식별 체계
- **고객 ID**: 영구 부여 (여권이름-국적-생년월일)
- **신규/재구매 구분**: 자동 판별 시스템
- **중복 고객 방지**: 이름+성별+생년월일+국적 기준

### 📝 고객 정보 필드
#### **기본 정보**
- 이름, 성별, 생년월일, 국적
- 여권명 (영문)
- 연락처 (전화번호)

#### **마케팅 정보**  
- 유입경로 (Threads, 지인소개, 재구매, 샤오홍슈 등)
- 소통채널 (Instagram, KakaoTalk 등)
- 채널 계정명
- 예약자 여부 (본인 vs 대리 예약)

#### **거래 정보**
- 총 결제금액 (누적)
- 방문 횟수
- 선호 시술 카테고리
- 평균 예약 간격

### 📋 주요 기능

#### **고객 등록/수정**
- 신규 고객 등록 폼
- 기존 고객 정보 수정
- 중복 고객 검증 및 병합

#### **고객 검색/필터링**
- 텍스트 검색 (이름, 연락처, 계정명)
- 유입경로별 필터링
- 국적별 필터링
- 방문 횟수별 필터링
- 결제 금액대별 필터링

#### **시술 이력 조회**
- 고객별 전체 시술 이력
- 시술별 상세 정보 (날짜, 병원, 가격)
- 패키지 vs 단일 시술 분석
- 재구매 패턴 분석

### 🔗 연동 기능
- **예약 관리 탭**: 새 예약 생성 시 고객 정보 자동 연동
- **정산 관리 탭**: 고객별 정산 내역 연결
- **시술 관리 탭**: 시술 이력 실시간 업데이트

---

## 3️⃣ 📅 예약 관리 탭

### 🎯 주요 목적
예약 생성부터 완료까지의 전체 프로세스 관리

### 📝 새 예약 생성 프로세스
#### **Step 1: 고객 정보**
```
신규 고객인지 재구매 고객인지 자동 판별
├─ 신규 고객: 고객 정보 신규 입력
└─ 재구매 고객: 기존 정보 불러오기 + 수정 가능
```

#### **Step 2: 예약 정보**
- 날짜 및 시간 선택
- 병원 선택 (파트너 병원 목록에서)
- 서비스 내용 입력
- 예상 소요 시간

#### **Step 3: 연락처 및 메모**
- 고객 인스타그램 계정명
- 기타 연락 방법
- 관리자/가이드 공유 메모 (CRUD 가능)

### 📋 예약 목록 관리
#### **List View 표시 항목**
- 예약 코드, 고객명, 예약일시
- 병원명, 서비스 내용 요약
- 예약 상태, 배정된 가이드
- 진행 단계 표시

#### **상세 보기 다이얼로그**
- 새 예약 생성과 동일한 UI
- '수정하기' 버튼으로 편집 모드
- '정산하기' 버튼으로 정산 관리 탭 연동

### 🔍 필터링 및 검색
- **텍스트 검색**: 고객명, 예약코드, 메모 내용
- **상태별 필터링**: 대기/배정/진행/완료/취소
- **병원별 필터링**: 파트너 병원 목록
- **기간별 필터링**: 날짜 범위 선택
- **가이드별 필터링**: 배정된 가이드 기준

### 🎯 가이드 배정 기능
- 예약별 가이드 배정/변경
- 가이드별 스케줄 충돌 검증
- 가이드 역량/전문분야 매칭

---

## 4️⃣ 💰 정산 관리 탭

### 🎯 주요 목적
가이드 서비스 완료 후 수수료 정산 처리

### 💼 정산 프로세스
#### **정산 시작 조건**
```
예약 완료 → 가이드 서비스 제공 → 시술내역 제출 → 정산 처리
```

#### **정산 정보 입력**
- 고객 시술내역 수동 입력
- 시술명 및 가격 정보
- 패키지 여부 자동 감지
- 부가세 자동 계산

### 💰 수수료 계산 체계
#### **병원-회사 간 수수료**
- 병원별 차등 적용 (15~20%)
- 병원 관리 탭에서 설정 관리

#### **회사-가이드 간 수수료**
- 고정 요율: 고객결제액(부가세 제외)의 4.5%
- 부가세 계산: 대한민국 세법 준수 (10%)

### 🏆 가이드 등급 시스템
#### **등급별 달성 조건 및 보너스**
```
🟤 브론즈 (Bronze): 0 ~ 1,500만원 → 보너스 없음
⚪ 실버 (Silver): 1,500만원 ~ 3,000만원 → +70만원
🪙 골드 (Gold): 3,000만원 ~ 4,500만원 → +70만원
🛡️ 플래티넘 (Platinum): 4,500만원 ~ 6,000만원 → +70만원
✳️ 에메랄드 (Emerald): 6,000만원 ~ 7,500만원 → +70만원
🔷 사파이어 (Sapphire): 7,500만원 ~ 9,000만원 → +70만원
🔴 루비 (Ruby): 9,000만원 ~ 10,500만원 → +70만원
🧿 티타늄 (Titanium): 10,500만원 ~ 12,000만원 → +70만원
💠 다이아몬드 (Diamond): 12,000만원 이상 → +70만원
```

### 📊 정산 관리 기능
- 월별 정산 현황 조회
- 가이드별 정산 내역
- 등급 변동 알림
- 정산 승인/완료 처리

---

## 5️⃣ 💉 시술 관리 탭

### 🎯 주요 목적
시술 및 패키지 상품의 체계적 관리 및 분석

### 📦 패키지 관리 시스템
#### **패키지 유형**
- **분리 가능 패키지**: 개별 시술로 분해 가능 (예: 울쎄라300+써마지300)
- **분리 불가능 패키지**: 함께 진행되는 시술 (예: 포텐자+쥬베룩스킨2cc)

#### **패키지 정의 기능**
- 새 패키지 생성
- 구성 시술 설정
- 가중치 비율 설정 (구성 요소별 중요도)
- 패키지 설명 및 특징

### 🔄 자동 분해 시스템
#### **동작 원리**
```
고객 시술 입력 → 패키지 감지 → 자동 분해 → 구성 시술별 분석 데이터 생성
```

#### **분석 데이터 활용**
- 개별 시술 인기도 통계
- 패키지 vs 단일 시술 트렌드
- 시술 조합 패턴 분석

### 📊 시술 분석 대시보드
#### **인기도 분석**
- 시술별 사용 빈도
- 가중치 적용 매출 기여도
- 트렌드 변화 (30일, 90일 기준)

#### **패키지 성과 분석**
- 패키지별 사용률
- 평균 단가 비교
- 고객 만족도 연계

### 🛠️ 관리 기능
- 시술 카테고리 관리
- 새 시술 등록
- 패키지 수정/삭제
- 가격 정보 업데이트

---

## 6️⃣ 📊 재무 관리 탭

### 🎯 주요 목적
전체 비즈니스의 재무 현황 종합 분석

### 💰 핵심 재무 지표
#### **매출 분석**
- 총 거래액 (고객 결제 기준)
- 회사 매출 (병원 수수료 적용)
- 순매출 (가이드 정산액 차감)
- 부가세 별도 관리

#### **비용 분석**
- 가이드 정산액 (주요 지출)
- 가이드 등급 보너스
- 기타 운영비용

#### **수익성 분석**
- 매출총이익률
- 병원별 수익성
- 가이드별 수익 기여도
- 시술별 마진 분석

### 📈 재무 리포트
#### **월별/분기별 보고서**
- P&L (손익계산서) 형태
- 매출 성장률 분석
- 비용 구조 변화
- 수익성 트렌드

#### **예측 및 목표 관리**
- 월별 매출 목표 설정
- 실적 대비 달성률
- 향후 3개월 예측

### 📊 시각화 대시보드
- 매출 트렌드 라인 차트
- 비용 구조 파이 차트
- 수익성 지표 게이지 차트

---

## 7️⃣ 🎯 가이드 관리 탭

### 🎯 주요 목적
협력 가이드의 종합적 관리 및 성과 평가

### 👤 가이드 정보 관리
#### **기본 정보**
- 개인 정보 (이름, 연락처, 언어 능력)
- 전문 분야 (시술 카테고리별 전문성)
- 자격증 및 경력 사항
- 활동 지역 및 가능 시간

#### **성과 정보**
- 누적 서비스 건수
- 누적 매출 기여도
- 현재 등급 및 진급 조건
- 고객 만족도 평균

### 📊 성과 평가 시스템
#### **등급 관리**
- 현재 등급 표시
- 다음 등급까지 필요 매출
- 등급별 혜택 및 보너스
- 등급 변동 이력

#### **KPI 관리**
- 월별 서비스 건수
- 평균 고객 단가
- 재배정 요청 비율
- 고객 리뷰 점수

### 🔍 가이드 검색/필터링
- 이름, 전문분야별 검색
- 등급별 필터링
- 활동 지역별 필터링
- 언어 능력별 필터링
- 성과 지표별 정렬

### 🔗 예약 관리 연동
- 가이드별 스케줄 관리
- 예약 배정 최적화
- 전문분야 매칭 시스템

---

## 8️⃣ ⭐ 리뷰 관리 탭

### 🎯 주요 목적
고객 피드백 수집 및 서비스 품질 관리

### 📝 리뷰 수집 시스템
#### **Phase 1: Google Form 연동**
- Google Form으로 리뷰 수집
- Google Spreadsheet 데이터 연동
- 수동 리뷰 입력 기능

#### **Phase 2: 웹 리뷰 폼**
- 별도 웹 리뷰 페이지 개발
- 고객 회원가입/로그인 없이 작성
- 예약 코드 기반 인증

#### **Phase 3: 모바일 앱 연동**
- 고객용 모바일 앱 개발 시
- 통합 리뷰 시스템
- 가이드/병원별 세분화 리뷰

### 📊 리뷰 분석 기능
#### **만족도 분석**
- 평균 평점 및 분포
- 카테고리별 만족도 (가이드, 병원, 시술)
- 트렌드 변화 추적

#### **텍스트 분석**
- 긍정/부정 키워드 추출
- 개선 포인트 식별
- 서비스 강점 파악

### 🔄 피드백 활용
- 가이드 평가에 반영
- 병원 파트너십 관리
- 서비스 개선 방향 도출

---

## 9️⃣ 🏥 병원 관리 탭

### 🎯 주요 목적
파트너 병원 정보 및 계약 조건 관리

### 🏥 병원 정보 관리
#### **기본 정보**
- 병원명, 주소, 연락처
- 대표자 정보
- 전문 진료과목
- 주요 시술 항목

#### **계약 정보**
- 계약 기간 및 조건
- 수수료율 (15~20% 개별 설정)
- 결제 조건 및 주기
- 특별 약관 사항

### 💰 수수료 관리 시스템
#### **병원별 수수료율 설정**
- 개별 병원별 요율 관리
- 시술별 차등 요율 (선택사항)
- 요율 변경 이력 관리
- 정산 시 자동 적용

#### **매출 분석**
- 병원별 월간 매출 현황
- 수수료 정산 내역
- 성과 비교 분석

### 📋 병원 평가 시스템
#### **성과 지표**
- 월간 고객 수
- 평균 시술 단가
- 고객 만족도
- 재방문율

#### **파트너십 관리**
- 계약 갱신 알림
- 성과 기반 요율 협상
- 신규 병원 발굴

### 🔗 연동 기능
- 예약 관리: 병원별 예약 현황
- 정산 관리: 수수료 자동 계산
- 재무 관리: 병원별 수익 분석

---

## 🛠️ 공통 기능 요구사항

### 🔔 알림 시스템
#### **관리자 알림**
- 정산 마감일 알림
- 예약 배정 대기 알림
- 가이드 등급 변동 알림
- 고객 문의 알림

#### **시스템 알림**
- 데이터 백업 완료 알림
- 오류 발생 알림
- 시스템 업데이트 알림

### 📤 데이터 내보내기
#### **Excel 리포트**
- 월별 매출 보고서
- 고객 목록 및 이력
- 가이드 성과 리포트
- 재무 현황 보고서

#### **PDF 리포트**
- 공식 재무 보고서
- 가이드 정산서
- 병원 정산서

### ⚙️ 시스템 설정
#### **기본 설정**
- 회사 기본 정보
- 기본 수수료율 설정
- 등급 기준 및 보너스 설정
- 알림 설정

#### **사용자 관리 (향후)**
- 관리자 계정 관리
- 권한별 접근 제어
- 로그인 이력 관리

### 💾 데이터 백업 시스템
#### **자동 백업**
- 일일 자동 백업
- 주간 전체 백업
- 월간 압축 백업

#### **수동 백업**
- 즉시 백업 실행
- 특정 데이터 선택 백업
- 백업 파일 다운로드

---

## 🔄 향후 확장 계획

### 📱 모바일 앱 개발
#### **가이드용 모바일 앱**
- 스케줄 관리
- 고객 정보 조회
- 정산 정보 확인
- 실시간 알림

#### **고객용 모바일 앱**
- 예약 신청
- 이력 조회
- 리뷰 작성
- 문의 기능

### 🤖 자동화 고도화
#### **AI 기반 기능**
- 고객 선호도 예측
- 최적 가이드 매칭
- 매출 예측 모델
- 리뷰 감성 분석

#### **프로세스 자동화**
- 예약 확인 자동 알림
- 정산 자동 계산
- 리포트 자동 생성

---

**📅 마지막 업데이트**: 2025-06-17
**📋 승인자**: 프로젝트 오너
**🔄 다음 리뷰**: Phase 1 완료 후 